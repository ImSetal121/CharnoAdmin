# 前端管理页面开发规范

## 核心原则

**前端管理页面负责提供数据展示、搜索、分页、CRUD操作等功能。所有管理页面应遵循统一的代码结构和交互模式，确保用户体验的一致性。**

## 页面结构

### 标准页面布局

每个管理页面应包含以下部分（从上到下）：

1. **页面标题和操作按钮**：左侧显示页面标题，右侧显示"新增"按钮
2. **搜索表单**：提供条件查询功能，包含查询和重置按钮
3. **数据表格**：展示数据列表，支持分页
4. **分页组件**：位于表格下方，右侧对齐
5. **新增/编辑弹窗**：用于创建和编辑数据

## 文件结构

### 目录结构

```
src/pages/System/{资源名}/
  ├── index.tsx      # 页面主文件
  └── index.css      # 页面样式文件
```

### API 文件结构

**详细规范请参考《前端 API 规范.md》**

```
src/api/
  ├── index.ts                    # API 统一导出
  └── {包名}/                      # 对应后端 org.charno.{包名}.controller 包
      ├── index.ts                # 包内 API 统一导出
      └── {Controller名}.ts       # 对应后端 {Controller名}Controller（去除 Controller 后缀）
```

## 状态管理规范

### 必需的状态

每个管理页面应包含以下状态：

```typescript
// 数据列表
const [items, setItems] = useState<EntityType[]>([]);

// 加载状态
const [loading, setLoading] = useState(false);

// 分页状态
const [total, setTotal] = useState(0);
const [currentPage, setCurrentPage] = useState(1);
const [pageSize, setPageSize] = useState(10);

// 弹窗状态
const [visible, setVisible] = useState(false);
const [editingItem, setEditingItem] = useState<EntityType | null>(null);

// 表单实例
const [form] = Form.useForm();

// 查询参数
const [queryParams, setQueryParams] = useState<QueryParamsType>({
  page: 0,
  size: 10,
});
```

## API 调用规范

### API 文件标准模板

```typescript
/**
 * {资源名}管理API
 * 对应后端 Admin{资源名}Controller
 */

import { get, post, put, del } from '@/utils/request';
import type { EntityType, QueryParamsType, PageQueryParamsType } from '@/types';

/**
 * 创建{资源名}
 * POST /api/admin/{资源名}
 * 
 * @param item 实体对象
 * @returns 创建的实体信息
 */
export const create{资源名} = (item: EntityType): Promise<EntityType> => {
  return post<EntityType>('/api/admin/{资源名}', item);
};

/**
 * 根据ID查询{资源名}
 * GET /api/admin/{资源名}/{id}
 * 
 * @param id 实体ID
 * @returns 实体信息
 */
export const get{资源名}ById = (id: string): Promise<EntityType> => {
  return get<EntityType>(`/api/admin/{资源名}/${id}`);
};

/**
 * 更新{资源名}
 * PUT /api/admin/{资源名}/{id}
 * 
 * @param id 实体ID
 * @param item 实体对象
 * @returns 更新后的实体信息
 */
export const update{资源名} = (id: string, item: EntityType): Promise<EntityType> => {
  return put<EntityType>(`/api/admin/{资源名}/${id}`, item);
};

/**
 * 删除{资源名}
 * DELETE /api/admin/{资源名}/{id}
 * 
 * @param id 实体ID
 * @returns void
 */
export const delete{资源名} = (id: string): Promise<void> => {
  return del<void>(`/api/admin/{资源名}/${id}`);
};

/**
 * 不分页条件查询{资源名}
 * GET /api/admin/{资源名}/query
 * 
 * @param params 查询参数
 * @returns 实体列表
 */
export const query{资源名}s = (params?: QueryParamsType): Promise<EntityType[]> => {
  return get<EntityType[]>('/api/admin/{资源名}/query', params);
};

/**
 * 分页条件查询{资源名}
 * GET /api/admin/{资源名}/query/page
 * 
 * @param params 查询参数（包含分页参数）
 * @returns 实体列表
 */
export const query{资源名}sWithPage = (params?: PageQueryParamsType): Promise<EntityType[]> => {
  return get<EntityType[]>('/api/admin/{资源名}/query/page', params);
};
```

### API 函数命名规范

- **创建**：`create{资源名}`，如 `createUser`、`createRole`
- **查询单个**：`get{资源名}ById` 或 `get{资源名}ByCode`，如 `getUserById`、`getRoleByCode`
- **更新**：`update{资源名}`，如 `updateUser`、`updateRole`
- **删除**：`delete{资源名}`，如 `deleteUser`、`deleteRole`
- **查询列表**：`query{资源名}s`，如 `queryUsers`、`queryRoles`
- **分页查询**：`query{资源名}sWithPage`，如 `queryUsersWithPage`、`queryRolesWithPage`

## 页面组件规范

### ✅ 标准页面模板

```typescript
import { useState, useEffect } from 'react';
import {
  Table,
  Button,
  Form,
  Input,
  Select,
  Modal,
  Message,
  Space,
  Card,
  Typography,
  Pagination,
} from '@arco-design/web-react';
import { IconPlus, IconEdit, IconDelete, IconSearch } from '@arco-design/web-react/icon';
import type { EntityType, PageQueryParamsType } from '@/types';
import {
  queryEntitiesWithPage,
  createEntity,
  updateEntity,
  deleteEntity,
} from '@/api/entity';
import './index.css';

const { Title } = Typography;
const FormItem = Form.Item;
const Option = Select.Option;

export default function EntityPage() {
  // ==================== 状态定义 ====================
  const [items, setItems] = useState<EntityType[]>([]);
  const [loading, setLoading] = useState(false);
  const [total, setTotal] = useState(0);
  const [currentPage, setCurrentPage] = useState(1);
  const [pageSize, setPageSize] = useState(10);
  const [visible, setVisible] = useState(false);
  const [editingItem, setEditingItem] = useState<EntityType | null>(null);
  const [form] = Form.useForm();

  // 查询参数
  const [queryParams, setQueryParams] = useState<PageQueryParamsType>({
    page: 0,
    size: 10,
  });

  // ==================== 数据加载 ====================

  /**
   * 加载数据列表
   */
  const loadItems = async () => {
    setLoading(true);
    try {
      const params: PageQueryParamsType = {
        ...queryParams,
        page: currentPage - 1, // 后端从0开始，前端从1开始
        size: pageSize,
      };
      const data = await queryEntitiesWithPage(params);
      setItems(data);
      // 注意：后端返回的是列表，没有总数，这里假设返回的数据长度就是总数
      // 实际应该从后端返回分页信息中获取总数
      setTotal(data.length);
    } catch (error: any) {
      Message.error(error.message || '加载数据列表失败');
    } finally {
      setLoading(false);
    }
  };

  useEffect(() => {
    loadItems();
  }, [currentPage, pageSize, queryParams]);

  // ==================== 搜索处理 ====================

  /**
   * 处理搜索
   */
  const handleSearch = (values: any) => {
    setQueryParams({
      ...values,
      page: 0,
      size: pageSize,
    });
    setCurrentPage(1);
  };

  /**
   * 处理重置
   */
  const handleReset = () => {
    setQueryParams({
      page: 0,
      size: pageSize,
    });
    setCurrentPage(1);
  };

  // ==================== 弹窗处理 ====================

  /**
   * 打开新增/编辑弹窗
   */
  const handleOpenModal = (item?: EntityType) => {
    if (item) {
      setEditingItem(item);
      form.setFieldsValue(item);
    } else {
      setEditingItem(null);
      form.resetFields();
    }
    setVisible(true);
  };

  /**
   * 关闭弹窗
   */
  const handleCloseModal = () => {
    setVisible(false);
    setEditingItem(null);
    form.resetFields();
  };

  // ==================== CRUD 操作 ====================

  /**
   * 保存数据（新增/编辑）
   */
  const handleSave = async () => {
    try {
      const values = await form.validate();
      if (editingItem?.id) {
        // 更新
        await updateEntity(editingItem.id, values);
        Message.success('更新成功');
      } else {
        // 新增
        await createEntity(values);
        Message.success('创建成功');
      }
      handleCloseModal();
      loadItems();
    } catch (error: any) {
      if (error.message) {
        Message.error(error.message);
      }
    }
  };

  /**
   * 删除数据
   */
  const handleDelete = (item: EntityType) => {
    if (!item.id) return;
    
    Modal.confirm({
      title: '确认删除',
      content: `确定要删除 "${item.name || item.id}" 吗？`,
      onOk: async () => {
        try {
          await deleteEntity(item.id!);
          Message.success('删除成功');
          loadItems();
        } catch (error: any) {
          Message.error(error.message || '删除失败');
        }
      },
    });
  };

  // ==================== 表格列定义 ====================

  const columns = [
    {
      title: 'ID',
      dataIndex: 'id',
      width: 200,
      ellipsis: true,
    },
    {
      title: '名称',
      dataIndex: 'name',
      width: 150,
    },
    {
      title: '创建时间',
      dataIndex: 'createdAt',
      width: 180,
      render: (time: string) => {
        if (!time) return '-';
        return new Date(time).toLocaleString('zh-CN');
      },
    },
    {
      title: '操作',
      width: 200,
      fixed: 'right' as const,
      render: (_: any, record: EntityType) => (
        <Space>
          <Button
            type="text"
            size="small"
            icon={<IconEdit />}
            onClick={() => handleOpenModal(record)}
          >
            编辑
          </Button>
          <Button
            type="text"
            size="small"
            status="danger"
            icon={<IconDelete />}
            onClick={() => handleDelete(record)}
          >
            删除
          </Button>
        </Space>
      ),
    },
  ];

  // ==================== 渲染 ====================

  return (
    <div className="entity-page">
      <Card>
        <Space direction="vertical" size="large" style={{ width: '100%' }}>
          {/* 标题和操作 */}
          <div className="page-header">
            <Title heading={4} style={{ margin: 0 }}>
              {资源名}管理
            </Title>
            <Button type="primary" icon={<IconPlus />} onClick={() => handleOpenModal()}>
              新增{资源名}
            </Button>
          </div>

          {/* 搜索表单 */}
          <Card size="small">
            <Form
              layout="inline"
              onSubmit={handleSearch}
              style={{ marginBottom: 0 }}
            >
              <FormItem label="名称" field="name">
                <Input placeholder="请输入名称" allowClear />
              </FormItem>
              <FormItem>
                <Space>
                  <Button type="primary" htmlType="submit" icon={<IconSearch />}>
                    查询
                  </Button>
                  <Button onClick={handleReset}>重置</Button>
                </Space>
              </FormItem>
            </Form>
          </Card>

          {/* 表格 */}
          <Table
            columns={columns}
            data={items}
            loading={loading}
            pagination={false}
            border
          />

          {/* 分页 */}
          <div className="pagination-wrapper">
            <Pagination
              current={currentPage}
              pageSize={pageSize}
              total={total}
              showTotal
              showJumper
              onChange={(page, size) => {
                setCurrentPage(page);
                setPageSize(size);
              }}
            />
          </div>
        </Space>
      </Card>

      {/* 新增/编辑弹窗 */}
      <Modal
        title={editingItem ? '编辑{资源名}' : '新增{资源名}'}
        visible={visible}
        onOk={handleSave}
        onCancel={handleCloseModal}
        autoFocus={false}
        focusLock={true}
        style={{ width: 600 }}
      >
        <Form form={form} layout="vertical">
          <FormItem
            label="名称"
            field="name"
            rules={[{ required: true, message: '请输入名称' }]}
          >
            <Input placeholder="请输入名称" />
          </FormItem>
        </Form>
      </Modal>
    </div>
  );
}
```

## 表格列定义规范

### 操作列规范

**所有管理页面的操作列必须：**

1. **固定到右侧**：`fixed: 'right' as const`
2. **设置宽度**：`width: 200`（确保按钮内容不超出）
3. **包含编辑和删除按钮**：使用 `IconEdit` 和 `IconDelete` 图标
4. **按钮样式**：编辑按钮使用 `type="text"`，删除按钮使用 `type="text" status="danger"`

**标准操作列模板：**

```typescript
{
  title: '操作',
  width: 200,
  fixed: 'right' as const,
  render: (_: any, record: EntityType) => (
    <Space>
      <Button
        type="text"
        size="small"
        icon={<IconEdit />}
        onClick={() => handleOpenModal(record)}
      >
        编辑
      </Button>
      <Button
        type="text"
        size="small"
        status="danger"
        icon={<IconDelete />}
        onClick={() => handleDelete(record)}
      >
        删除
      </Button>
    </Space>
  ),
}
```

### 时间列规范

**时间字段统一格式化：**

```typescript
{
  title: '创建时间',
  dataIndex: 'createdAt',
  width: 180,
  render: (time: string) => {
    if (!time) return '-';
    return new Date(time).toLocaleString('zh-CN');
  },
}
```

### 状态列规范

**状态字段统一显示：**

```typescript
{
  title: '状态',
  dataIndex: 'status',
  width: 100,
  render: (status: string) => {
    const statusMap: Record<string, { text: string; color: string }> = {
      ENABLED: { text: '启用', color: 'green' },
      DISABLED: { text: '禁用', color: 'red' },
      LOCKED: { text: '锁定', color: 'orange' },
    };
    const statusInfo = statusMap[status] || { text: status, color: 'gray' };
    return <span style={{ color: statusInfo.color }}>{statusInfo.text}</span>;
  },
}
```

## 字段展示完整性规范

### ⚠️ 重要：字段展示完整性要求

**字段展示完整性是管理页面的核心要求。所有管理页面必须完整展示后端实体的所有相关字段，确保管理员能够查看和管理完整的实体信息。**

### 字段分类

#### 1. 必须展示的字段（表格列 + 表单字段）

**业务字段：**
- ✅ 主键字段（ID、code 等）
- ✅ 业务标识字段（名称、代码、标识符等）
- ✅ 状态字段（status）
- ✅ 关联字段（roleCode、parentId 等）
- ✅ 分类字段（type、category 等）
- ✅ 描述字段（description、remark 等）

**用户信息字段（如用户管理）：**
- ✅ 账号信息（accountIdentifier、accountType）
- ✅ 个人信息（nickname、gender、avatarUrl）
- ✅ 偏好设置（locale、timezone）

**时间字段：**
- ✅ 创建时间（createdAt）
- ✅ 更新时间（updatedAt）
- ✅ 业务相关时间（lastLoginAt、expireAt 等）

**其他业务字段：**
- ✅ 所有业务相关的可编辑字段

#### 2. 仅表单展示的字段（不在表格中展示）

**详细配置字段：**
- ✅ 复杂配置项（如 locale、timezone）
- ✅ 长文本字段（description、content）
- ✅ 可选字段（如 avatarUrl）

#### 3. 不应展示的字段（敏感信息、内部字段）

**敏感信息：**
- ❌ 密码相关字段（passwordHash、passwordAlgoVersion）
- ❌ 密钥、令牌等安全相关字段

**内部字段：**
- ❌ 逻辑删除字段（deletedAt）
- ❌ 乐观锁版本号（version）
- ❌ 内部状态字段（如内部标记位）

**密码修改时间：**
- ❌ passwordChangedAt（通常不需要在管理页面展示）

### 字段展示检查清单

**创建管理页面时，必须检查：**

1. **对比后端实体类**
   - [ ] 列出后端实体的所有字段
   - [ ] 识别哪些字段应该展示
   - [ ] 识别哪些字段不应该展示

2. **表格列完整性**
   - [ ] 主键字段已展示
   - [ ] 所有业务标识字段已展示
   - [ ] 状态字段已展示（如有）
   - [ ] 关联字段已展示（如有）
   - [ ] 分类字段已展示（如有）
   - [ ] 创建时间已展示
   - [ ] 更新时间已展示（如有）
   - [ ] 业务相关时间字段已展示（如 lastLoginAt）

3. **表单字段完整性**
   - [ ] 所有可编辑的业务字段已在表单中
   - [ ] 必填字段已标记 `required`
   - [ ] 可选字段已设置 `allowClear`（如适用）
   - [ ] 枚举字段已提供选项（Select 组件）

4. **字段渲染**
   - [ ] 时间字段已格式化显示
   - [ ] 状态字段已使用颜色和文本映射
   - [ ] 枚举字段已使用文本映射（如 accountType、gender）
   - [ ] 空值已处理（显示 `-`）

### 字段展示最佳实践

#### 1. 表格列展示原则

**优先展示的字段（从左到右）：**
1. 主键（ID、code）
2. 主要业务标识（名称、标识符）
3. 分类/类型字段
4. 状态字段
5. 关联字段
6. 时间字段（创建时间、更新时间、业务时间）
7. 操作列（固定右侧）

**示例：用户管理表格列顺序**
```typescript
const columns = [
  { title: 'ID', dataIndex: 'id' },                    // 主键
  { title: '账号标识', dataIndex: 'accountIdentifier' }, // 主要标识
  { title: '账号类型', dataIndex: 'accountType' },     // 分类字段
  { title: '昵称', dataIndex: 'nickname' },            // 业务字段
  { title: '性别', dataIndex: 'gender' },               // 业务字段
  { title: '角色代码', dataIndex: 'roleCode' },        // 关联字段
  { title: '状态', dataIndex: 'status' },               // 状态字段
  { title: '最后登录时间', dataIndex: 'lastLoginAt' }, // 业务时间
  { title: '最后登录IP', dataIndex: 'lastLoginIp' },   // 业务字段
  { title: '创建时间', dataIndex: 'createdAt' },       // 创建时间
  { title: '更新时间', dataIndex: 'updatedAt' },       // 更新时间
  { title: '操作', ... },                               // 操作列
];
```

#### 2. 表单字段组织

**表单字段分组（从上到下）：**
1. 主要业务字段（必填）
2. 关联/分类字段
3. 状态字段
4. 详细信息字段（可选）
5. 配置字段（可选）

**示例：用户管理表单字段顺序**
```typescript
<Form form={form} layout="vertical">
  {/* 主要业务字段 */}
  <FormItem label="账号标识" field="accountIdentifier" rules={[{ required: true }]}>
    <Input placeholder="请输入账号标识" />
  </FormItem>
  <FormItem label="昵称" field="nickname" rules={[{ required: true }]}>
    <Input placeholder="请输入昵称" />
  </FormItem>
  
  {/* 关联/分类字段 */}
  <FormItem label="角色代码" field="roleCode">
    <Input placeholder="请输入角色代码" />
  </FormItem>
  <FormItem label="账号类型" field="accountType">
    <Select placeholder="请选择账号类型">
      <Option value="EMAIL">邮箱</Option>
      <Option value="PHONE">手机</Option>
    </Select>
  </FormItem>
  
  {/* 状态字段 */}
  <FormItem label="状态" field="status">
    <Select placeholder="请选择状态">
      <Option value="ENABLED">启用</Option>
      <Option value="DISABLED">禁用</Option>
    </Select>
  </FormItem>
  
  {/* 详细信息字段 */}
  <FormItem label="性别" field="gender">
    <Select placeholder="请选择性别" allowClear>
      <Option value="MALE">男</Option>
      <Option value="FEMALE">女</Option>
    </Select>
  </FormItem>
  <FormItem label="头像URL" field="avatarUrl">
    <Input placeholder="请输入头像URL" />
  </FormItem>
  
  {/* 配置字段 */}
  <FormItem label="语言环境" field="locale">
    <Input placeholder="请输入语言环境，如：zh-CN" />
  </FormItem>
  <FormItem label="时区" field="timezone">
    <Input placeholder="请输入时区，如：Asia/Shanghai" />
  </FormItem>
</Form>
```

#### 3. 字段渲染规范

**时间字段渲染：**
```typescript
{
  title: '创建时间',
  dataIndex: 'createdAt',
  width: 180,
  render: (time: string) => {
    if (!time) return '-';
    return new Date(time).toLocaleString('zh-CN');
  },
}
```

**枚举字段渲染：**
```typescript
{
  title: '账号类型',
  dataIndex: 'accountType',
  width: 100,
  render: (type: string) => {
    const typeMap: Record<string, string> = {
      EMAIL: '邮箱',
      PHONE: '手机',
      USERNAME: '用户名',
      WECHAT: '微信',
    };
    return typeMap[type] || type;
  },
}
```

**状态字段渲染：**
```typescript
{
  title: '状态',
  dataIndex: 'status',
  width: 100,
  render: (status: string) => {
    const statusMap: Record<string, { text: string; color: string }> = {
      ENABLED: { text: '启用', color: 'green' },
      DISABLED: { text: '禁用', color: 'red' },
      LOCKED: { text: '锁定', color: 'orange' },
    };
    const statusInfo = statusMap[status] || { text: status, color: 'gray' };
    return <span style={{ color: statusInfo.color }}>{statusInfo.text}</span>;
  },
}
```

### ❌ 常见错误

1. **遗漏业务字段**
   ```typescript
   // ❌ 错误：遗漏了账号类型、性别等重要字段
   const columns = [
     { title: 'ID', dataIndex: 'id' },
     { title: '账号标识', dataIndex: 'accountIdentifier' },
     { title: '昵称', dataIndex: 'nickname' },
     // 缺少 accountType、gender、lastLoginAt 等字段
   ];
   ```

2. **遗漏时间字段**
   ```typescript
   // ❌ 错误：只展示了创建时间，遗漏了更新时间
   const columns = [
     { title: '创建时间', dataIndex: 'createdAt' },
     // 缺少 updatedAt
   ];
   ```

3. **表单字段不完整**
   ```typescript
   // ❌ 错误：表单中缺少 locale、timezone 等配置字段
   <Form>
     <FormItem label="昵称" field="nickname" />
     <FormItem label="性别" field="gender" />
     // 缺少 locale、timezone 等字段
   </Form>
   ```

4. **展示敏感信息**
   ```typescript
   // ❌ 错误：不应该展示密码相关字段
   {
     title: '密码哈希',
     dataIndex: 'passwordHash', // 敏感信息，不应展示
   }
   ```

## 分页处理规范

### 分页参数转换

**后端分页从0开始，前端分页从1开始，需要转换：**

```typescript
const params: PageQueryParamsType = {
  ...queryParams,
  page: currentPage - 1, // 后端从0开始，前端从1开始
  size: pageSize,
};
```

### 分页组件配置

**标准分页组件配置：**

```typescript
<Pagination
  current={currentPage}
  pageSize={pageSize}
  total={total}
  showTotal
  showJumper
  onChange={(page, size) => {
    setCurrentPage(page);
    setPageSize(size);
  }}
/>
```

## 样式规范

### CSS 文件标准模板

```css
.{资源名}-page {
  width: 100%;
}

.page-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.pagination-wrapper {
  display: flex;
  justify-content: flex-end;
  margin-top: 16px;
}
```

## 错误处理规范

### API 调用错误处理

**所有 API 调用必须包含错误处理：**

```typescript
try {
  const data = await queryEntitiesWithPage(params);
  setItems(data);
} catch (error: any) {
  Message.error(error.message || '加载数据列表失败');
} finally {
  setLoading(false);
}
```

### 表单验证错误处理

**表单提交错误处理：**

```typescript
try {
  const values = await form.validate();
  // 执行保存操作
} catch (error: any) {
  if (error.message) {
    Message.error(error.message);
  }
}
```

## 类型定义规范

### 查询参数类型

**在 `src/types/index.ts` 中定义类型：**

```typescript
/**
 * {资源名}查询参数
 */
export interface EntityQueryParams {
  /** 字段1（可选） */
  field1?: string;
  /** 字段2（可选） */
  field2?: string;
}

/**
 * {资源名}分页查询参数
 */
export interface EntityPageQueryParams extends EntityQueryParams {
  /** 页码（从0开始，默认0） */
  page?: number;
  /** 每页大小（默认10） */
  size?: number;
  /** 排序字段（可选，格式：field,asc/desc，默认按createdAt降序） */
  sort?: string;
}
```

## ❌ 禁止事项

1. **禁止在页面组件中直接调用 API**
   ```typescript
   // ❌ 错误：不应直接使用 fetch
   const data = await fetch('/api/admin/users');
   
   // ✅ 正确：使用 API 函数
   const data = await queryUsersWithPage(params);
   ```

2. **禁止硬编码 API 路径**
   ```typescript
   // ❌ 错误：硬编码路径
   return get('/api/admin/users/query/page', params);
   
   // ✅ 正确：使用常量或配置
   return get<EntityType[]>('/api/admin/users/query/page', params);
   ```

3. **禁止操作列宽度过小**
   ```typescript
   // ❌ 错误：宽度过小，按钮内容会超出
   {
     title: '操作',
     width: 100,
   }
   
   // ✅ 正确：设置合适的宽度
   {
     title: '操作',
     width: 200,
     fixed: 'right' as const,
   }
   ```

4. **禁止忘记分页参数转换**
   ```typescript
   // ❌ 错误：未转换分页参数
   const params = {
     page: currentPage, // 前端从1开始，后端从0开始
   };
   
   // ✅ 正确：转换分页参数
   const params = {
     page: currentPage - 1, // 后端从0开始
   };
   ```

## ✅ 检查清单

创建新的管理页面时，请检查：

### 基础结构检查

- [ ] 页面文件位于 `src/pages/System/{资源名}/index.tsx`
- [ ] API 文件位于 `src/api/{资源名}.ts`
- [ ] 类型定义在 `src/types/index.ts` 中
- [ ] 包含所有必需的状态（items, loading, total, currentPage, pageSize, visible, editingItem, form, queryParams）
- [ ] 实现了 `loadItems()` 函数
- [ ] 实现了 `handleSearch()` 和 `handleReset()` 函数
- [ ] 实现了 `handleOpenModal()` 和 `handleCloseModal()` 函数
- [ ] 实现了 `handleSave()` 和 `handleDelete()` 函数
- [ ] 操作列宽度为 200，且固定到右侧
- [ ] 分页参数正确转换（currentPage - 1）
- [ ] 所有 API 调用包含错误处理
- [ ] 使用了统一的样式类名（page-header, pagination-wrapper）

### 字段展示完整性检查（⚠️ 重要）

**对比后端实体类：**
- [ ] 已列出后端实体的所有字段
- [ ] 已识别应该展示的字段
- [ ] 已识别不应该展示的字段（敏感信息、内部字段）

**表格列完整性：**
- [ ] 主键字段已展示（ID、code 等）
- [ ] 所有业务标识字段已展示（名称、标识符等）
- [ ] 状态字段已展示（如有）
- [ ] 关联字段已展示（如有，如 roleCode）
- [ ] 分类字段已展示（如有，如 accountType）
- [ ] 创建时间已展示（createdAt）
- [ ] 更新时间已展示（updatedAt，如有）
- [ ] 业务相关时间字段已展示（如 lastLoginAt，如有）
- [ ] 其他业务字段已展示（如 gender、lastLoginIp 等）

**表单字段完整性：**
- [ ] 所有可编辑的业务字段已在表单中
- [ ] 必填字段已标记 `required`
- [ ] 可选字段已设置 `allowClear`（如适用）
- [ ] 枚举字段已提供选项（Select 组件）
- [ ] 配置字段已在表单中（如 locale、timezone）

**字段渲染：**
- [ ] 时间字段已格式化显示（使用 `toLocaleString('zh-CN')`）
- [ ] 状态字段已使用颜色和文本映射
- [ ] 枚举字段已使用文本映射（如 accountType、gender）
- [ ] 空值已处理（显示 `-`）

**敏感信息检查：**
- [ ] 未展示密码相关字段（passwordHash、passwordAlgoVersion）
- [ ] 未展示逻辑删除字段（deletedAt）
- [ ] 未展示乐观锁版本号（version）
- [ ] 未展示其他敏感或内部字段

## 优势

1. **结构统一**：所有管理页面遵循相同的代码结构
2. **易于维护**：统一的模式便于理解和维护
3. **用户体验一致**：相同的交互模式提供一致的用户体验
4. **开发效率高**：标准模板可以快速创建新页面
5. **类型安全**：完整的 TypeScript 类型定义

